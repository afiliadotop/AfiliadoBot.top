# Service Value Chain - Mapeamento ITIL 4

## ğŸ”„ ITIL 4 Service Value Chain

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GUIDING PRINCIPLES                          â”‚
â”‚  â€¢ Focus on value  â€¢ Start where you are  â€¢ Progress it      â”‚
â”‚  â€¢ Collaborate  â€¢ Think holistically  â€¢ Keep it simple       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SERVICE VALUE CHAIN                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚   Plan â”€â”€â–¶ Improve â”€â”€â–¶ Engage â”€â”€â–¶ Design & Transition â”€â”€â–¶  â”‚
â”‚                                                               â”‚
â”‚   â”€â”€â–¶ Obtain/Build â”€â”€â–¶ Deliver & Support â”€â”€â–¶                â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GOVERNANCE                                 â”‚
â”‚              (Evaluation, Direction, Monitoring)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Atividades do Service Value Chain

### 1. Plan (Planejar)
**Objetivo:** Criar entendimento compartilhado de visÃ£o, status e melhoria

**No AfiliadoBot:**

| Atividade | Componente | ResponsÃ¡vel |
|-----------|------------|-------------|
| **Product Roadmap** | `docs/roadmap.md` | Product Owner |
| **Architecture Planning** | `docs/architecture/` | Tech Lead |
| **Capacity Planning** | Render metrics review | DevOps |
| **Risk Assessment** | `docs/governance/risk-register.md` | Security Lead |

**Artefatos:**
- Roadmap trimestral
- Architecture Decision Records (ADRs)
- Capacity forecasts
- Risk register

---

### 2. Improve (Melhorar)
**Objetivo:** Melhoria contÃ­nua de produtos, serviÃ§os e prÃ¡ticas

**No AfiliadoBot:**

| Atividade | Componente | FrequÃªncia |
|-----------|------------|------------|
| **Post-Mortems** | `docs/operations/incidents/post-mortems/` | ApÃ³s incidentes |
| **Retrospectivas** | Sprint reviews | Quinzenal |
| **Code Reviews** | GitHub Pull Requests | ContÃ­nuo |
| **Performance Optimization** | Profiling, benchmarks | Mensal |
| **Security Audits** | Dependabot, Snyk | Semanal |

**MÃ©tricas:**
- Lead time for changes
- Deployment frequency
- Change failure rate
- Time to restore service (MTTR)

---

### 3. Engage (Engajar)
**Objetivo:** Entender necessidades dos stakeholders e promover engajamento

**No AfiliadoBot:**

| Stakeholder | Interface | Componente |
|-------------|-----------|------------|
| **UsuÃ¡rios Finais** | Web Frontend | `afiliadohub-nextjs/` |
| **Desenvolvedores** | API REST | `api/handlers/` |
| **Administradores** | Admin Panel | `afiliadohub-nextjs/admin/` |
| **Integradores** | API Docs | `docs/api/` |

**Touchpoints:**
- Website/App
- API endpoints
- Documentation
- Support (GitHub Issues)
- Telegram bot

---

### 4. Design & Transition (Desenhar e Transicionar)
**Objetivo:** Garantir produtos/serviÃ§os atendem expectativas de qualidade

**No AfiliadoBot:**

| Fase | Atividade | Output |
|------|-----------|--------|
| **Design** | Architecture design | ADRs, diagrams |
| **Development** | Coding, testing | Code, tests |
| **Testing** | Unit, integration, E2E | Test reports |
| **Transition** | Deployment | Release notes |

**PrÃ¡ticas:**
- Design patterns (Repository, Service Layer)
- Code reviews obrigatÃ³rios
- Automated testing (CI)
- Staging environment
- Progressive rollout

**LocalizaÃ§Ã£o:**
- `docs/architecture/patterns.md`
- `scripts/testing/`
- `.github/workflows/`

---

### 5. Obtain/Build (Obter/Construir)
**Objetivo:** Componentes e serviÃ§os disponÃ­veis quando necessÃ¡rio

**No AfiliadoBot:**

| Categoria | Componente | Origem |
|-----------|------------|--------|
| **External Services** | Shopee API | Obtido (API externa) |
| **External Services** | MercadoLivre API | Obtido (API externa) |
| **External Services** | Telegram Bot API | Obtido (API externa) |
| **External Services** | Supabase | Obtido (SaaS) |
| **Internal** | Backend API | ConstruÃ­do |
| **Internal** | Frontend | ConstruÃ­do |
| **Internal** | Scripts | ConstruÃ­do |

**Build Pipeline:**
```
Code â†’ Lint â†’ Test â†’ Build â†’ Package â†’ Deploy
```

**Ferramentas:**
- Python/pip (backend)
- Node/npm (frontend)
- Docker (containerizaÃ§Ã£o)
- GitHub Actions (CI/CD)

**LocalizaÃ§Ã£o:**
- `afiliadohub/` (backend build)
- `afiliadohub-nextjs/` (frontend build)
- `scripts/` (automation)

---

### 6. Deliver & Support (Entregar e Suportar)
**Objetivo:** ServiÃ§os entregues e suportados conforme acordado

**No AfiliadoBot:**

#### Delivery (Entrega)

| ServiÃ§o | Plataforma | SLA |
|---------|------------|-----|
| **Backend API** | Render | 99.5% uptime |
| **Frontend** | Vercel | 99.9% uptime |
| **Database** | Supabase | 99.9% uptime |
| **Telegram Bot** | Render | Best effort |

#### Support (Suporte)

| NÃ­vel | Responsabilidade | Response Time |
|-------|------------------|---------------|
| **L1** | GitHub Issues | < 24h |
| **L2** | Bug fixes | < 48h |
| **L3** | Architecture changes | < 1 semana |

**PrÃ¡ticas:**
- Monitoring (Sentry, Render metrics)
- Alerting (erros crÃ­ticos)
- Incident management (runbooks)
- On-call rotation (futuro)

**LocalizaÃ§Ã£o:**
- `docs/operations/runbooks/`
- `docs/operations/monitoring.md`
- Sentry dashboard

---

## ğŸ—ºï¸ Mapeamento Completo de Componentes

### Backend (`afiliadohub/api/`)

| Componente | Atividade ITIL | DescriÃ§Ã£o |
|------------|----------------|-----------|
| `handlers/` | **Engage** | API endpoints (interface externa) |
| `utils/` | **Support** | Utilities, helpers |
| `middleware/` | **Support** | CORS, auth, logging |
| `index.py` | **Deliver** | Main application |
| Tests | **Design & Transition** | Quality assurance |

### Frontend (`afiliadohub-nextjs/`)

| Componente | Atividade ITIL | DescriÃ§Ã£o |
|------------|----------------|-----------|
| `app/` | **Engage** | User interface |
| `components/` | **Design** | UI components |
| `lib/` | **Obtain/Build** | Client libraries |
| `public/` | **Deliver** | Static assets |

### Scripts (`scripts/`)

| Pasta | Atividade ITIL | DescriÃ§Ã£o |
|-------|----------------|-----------|
| `production/` | **Deliver** | ServiÃ§os em produÃ§Ã£o |
| `operations/` | **Support** | OperaÃ§Ãµes administrativas |
| `testing/` | **Design & Transition** | Testes e QA |
| `deployment/` | **Deliver** | CI/CD, deploy |
| `auth/` | **Obtain** | OAuth, tokens |
| `development/` | **Improve** | Ferramentas dev |

### DocumentaÃ§Ã£o (`docs/`)

| Pasta | Atividade ITIL | DescriÃ§Ã£o |
|-------|----------------|-----------|
| `architecture/` | **Plan** | Design do sistema |
| `api/` | **Engage** | Interface docs |
| `operations/` | **Support** | Runbooks, monitoring |
| `governance/` | **Plan** | PolÃ­ticas, processos |

---

## ğŸ¯ Flows Principais Mapeados

### 1. Feature Development Flow

```
Plan â†’ Design â†’ Build â†’ Test â†’ Deploy â†’ Support

1. Roadmap (Plan)
2. Architecture design (Design)
3. Code implementation (Build)
4. Automated tests (Transition)
5. CI/CD deploy (Deliver)
6. Monitoring & incidents (Support)
7. Retrospective (Improve)
```

### 2. Incident Management Flow

```
Detect â†’ Respond â†’ Resolve â†’ Review â†’ Improve

1. Monitoring alerts (Support)
2. Runbook execution (Support)
3. Fix deployed (Deliver)
4. Post-mortem (Improve)
5. Update runbooks (Improve)
```

### 3. Change Management Flow

```
Request â†’ Assess â†’ Approve â†’ Implement â†’ Review

1. RFC created (Plan)
2. Impact analysis (Plan)
3. CAB approval (Governance)
4. Implementation (Deliver)
5. Post-implementation review (Improve)
```

---

## ğŸ“Š MÃ©tricas por Atividade

### Plan
- Roadmap items completed vs planned
- Architecture decisions made
- Risks identified and mitigated

### Improve
- Incidents with post-mortems
- Improvement actions closed
- Code coverage trend

### Engage
- API usage (requests/day)
- User feedback responses
- Documentation page views

### Design & Transition
- Test coverage %
- Build success rate
- Deployment frequency

### Obtain/Build
- Dependency updates
- Build time
- Artifact size

### Deliver & Support
- Uptime %
- MTTR (Mean Time To Repair)
- Incident count

---

**VersÃ£o:** 2.0.0  
**Framework:** ITIL 4  
**Atualizado:** 2026-01-16
